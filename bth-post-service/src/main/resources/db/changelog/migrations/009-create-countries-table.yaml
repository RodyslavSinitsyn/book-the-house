databaseChangeLog:
  - changeSet:
      id: 9
      author: rsinitsyn
      comment: Creates 'countries' table
      labels: geo
      runAlways: false
      runOnChange: false
      preConditions:
        - onFail: HALT
          not:
            tableExists:
              tableName: countries
      rollback:
        - dropTable:
            tableName: countries
        - dropSequence:
            sequenceName: countries_id_seq
      changes:
        - sql:
            'CREATE TABLE public.countries
             (
                 id              bigint                                                NOT NULL,
                 name            character varying(100)                                NOT NULL,
                 iso3            character varying(3),
                 numeric_code    character varying(3),
                 iso2            character varying(2),
                 phonecode       character varying(255),
                 capital         character varying(255),
                 currency        character varying(255),
                 currency_name   character varying(255),
                 currency_symbol character varying(255),
                 tld             character varying(255),
                 native          character varying(255),
                 region          character varying(255),
                 region_id       bigint,
                 subregion       character varying(255),
                 subregion_id    bigint,
                 nationality     character varying(255),
                 timezones       text,
                 translations    text,
                 latitude        numeric(10, 8),
                 longitude       numeric(11, 8),
                 emoji           character varying(191),
                 "emojiU"        character varying(191),
                 created_at      timestamp without time zone,
                 updated_at      timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
                 flag            smallint                    DEFAULT 1                 NOT NULL,
                 wiki_data_id    character varying(255)
             );
             ALTER TABLE public.countries
                 ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
                     SEQUENCE NAME public.countries_id_seq
                     START WITH 1
                     INCREMENT BY 1
                     NO MINVALUE
                     NO MAXVALUE
                     CACHE 1
                     );
             ALTER TABLE ONLY public.countries
                 ADD CONSTRAINT countries_pkey PRIMARY KEY (id);
             CREATE INDEX countries_region_id_idx ON public.countries USING btree (region_id);
             CREATE INDEX countries_subregion_id_idx ON public.countries USING btree (subregion_id);
             ALTER TABLE ONLY public.countries
                 ADD CONSTRAINT countries_region_id_fkey FOREIGN KEY (region_id) REFERENCES public.regions (id);
             ALTER TABLE ONLY public.countries
                 ADD CONSTRAINT countries_subregion_id_fkey FOREIGN KEY (subregion_id) REFERENCES public.subregions (id);
             '


