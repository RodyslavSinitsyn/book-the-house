databaseChangeLog:
  - changeSet:
      id: 7
      author: rsinitsyn
      comment: Creates 'subregions' table
      labels: geo
      runAlways: false
      runOnChange: false
      preConditions:
        - onFail: HALT
          not:
            tableExists:
              tableName: subregions
      rollback:
        - dropTable:
            tableName: subregions
        - dropSequence:
            sequenceName: subregions_id_seq
      changes:
        - sql:
            'CREATE TABLE public.subregions
             (
                 id           bigint                                                NOT NULL,
                 name         character varying(100)                                NOT NULL,
                 translations text,
                 region_id    bigint                                                NOT NULL,
                 created_at   timestamp without time zone,
                 updated_at   timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
                 flag         smallint                    DEFAULT 1                 NOT NULL,
                 wiki_data_id character varying(255)
             );
             ALTER TABLE public.subregions
                 ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
                     SEQUENCE NAME public.subregions_id_seq
                     START WITH 1
                     INCREMENT BY 1
                     NO MINVALUE
                     NO MAXVALUE
                     CACHE 1
                     );
             ALTER TABLE ONLY public.subregions
                 ADD CONSTRAINT subregions_pkey PRIMARY KEY (id);
             CREATE INDEX subregions_region_id_idx ON public.subregions USING btree (region_id);
             ALTER TABLE ONLY public.subregions
                 ADD CONSTRAINT subregions_region_id_fkey FOREIGN KEY (region_id) REFERENCES public.regions (id);'



